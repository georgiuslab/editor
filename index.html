<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Microsoft Office Word</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="header">
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="title">Microsoft Office Word</div>
        <div>Free Version</div>
    </div>

    <!-- Menu Bar -->
    <div class="menu-bar">
        <div>File</div>
        <div style="font-weight: bold;">Home</div>
        <div>Insert</div>
        <div>Layout</div>
        <div>Review</div>
        <div onclick="getInfo()">View</div>
        <div onclick="showHelp('test.txt')">Help</div>
        <div onclick="showHelp('sameuli.txt')">Window</div>
        <div onclick="showHelp('bolo.txt')">About</div>
    </div>

    <div class="menu-container">
        <img id="menu-img" src="menu.png" alt="menu-bar">
        <input type="checkbox" id="toggle-bold" hidden>
        <label for="toggle-bold" id="bold" onclick="execCmd('bold')">B</label>
        <button id="center" onclick="execCmd('justifyCenter')">
            <i class="fas fa-align-center"></i>
        </button>
    </div>

    <!-- Ribbon 
    <div class="ribbon">
        <button onclick="execCmd('bold')"><b>B</b></button>
        <button onclick="execCmd('italic')"><i>I</i></button>
        <button onclick="execCmd('underline')"><u>U</u></button>
        <button onclick="execCmd('justifyLeft')">Left</button>
        <button onclick="execCmd('justifyCenter')">Center</button>
        <button onclick="execCmd('justifyRight')">Right</button>
        <button onclick="execCmd('insertUnorderedList')">â€¢ List</button>
    </div>
-->

</div>
    <!-- Editor -->
    <div id="firstPage" class="editor-container">
        <div class="editor" contenteditable="true">
            <p>hel-t|win-three|ab-last</p>
            <textarea id="question" placeholder="-"></textarea>
        </div>
    </div>

    <div id="helpContainer" class="editor-container">
        <div class="editor" contenteditable="true">
            <pre id="help">content</pre>
        </div>
    </div>

    <div class="answer-container">
        <div class="answer" contenteditable="true">
            <p>Haskell</p>
            <p id="answer"></p>
        </div>
    </div>

    <script>
        function execCmd(cmd) {
            document.execCommand(cmd, false, null);
        }

        function showHelp(file) {
            const container = document.getElementById('helpContainer')

            if (container.style.display === 'flex') {
                container.style.display = 'none';
                return;
            }

            fetch(file)
                .then(response => {
                    if (!response.ok) alert("File not found or can't be accessed.");
                    return response.text();
                })
                .then(data => {
                    const output = document.getElementById('help');
                    output.textContent = data;
                    container.style.display = 'flex'; // Show the div
                })
                .catch(error => {
                    const output = document.getElementById('help');
                    output.textContent = 'Error: ' + error.message;
                    container.style.display = 'flex'; // Show the div
                });

        }

        function getInfo() {
            const info = document.getElementById("question").value;
            const answer = document.getElementById("answer")
            fetch("https://ce45-2406-da1a-588-ed00-58e0-5ed8-b624-3de0.ngrok-free.app/get", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ text: info })
            })
                .then(response => response.json())
                .then(data => {
                    answer.innerText = data.response
                })
                .catch(error => {
                    console.error("Error sending data:", error);
                });
        }
    </script>

</body>

</html>